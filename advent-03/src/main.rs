fn main() {
    // PART 1
    let slope_raw: [&str; 323] = ["____a__a_______a________a____a_", "__aa_a_a_a___________________a_", "____a_a_aa__a____a______a______", "_________a_a______aa_____a_____", "__________a_aaa_aa___aa________", "a____a_a_______aa_____a__a_____", "a___________a_a___a__a__aa_aa__", "______aa_____________a_____a___", "__aa__________aaa__a_a__aa_____", "___________a________a______aa__", "__aa___________aa______________", "__a______aaa_a_____a_a_a_______", "__a__a__a__________a_a____a____", "_a_____aa______________________", "___a___aa__a___a_________a__aa_", "_a______a__a__a___a______a_aa__", "__aa_aa_______a__a_____a__a___a", "______________a__a__a___a______", "___a___a____aa_____a___a___a___", "______________________a___a____", "_______a______a___a__aa___a_a__", "aa______a__a_____a____a_____a__", "____a_a_aa_a_a____a____________", "a_____aa_____________a_________", "__________a___________a_a_____a", "___a___aa____a_a________a__a___", "________________a__a_aa_aa____a", "______a___a___aa___aa____a_____", "aa____a__a__a___a__a___________", "a__________________a___a_a__a__", "____aa____aa_a____a__a______a__", "_____a___________a_________aa__", "__a______________a_________a__a", "______aa____________________a__", "__a_____aaa___aaaa___a___a_aa__", "a__a_a______a_____a_______a_a__", "aa_a_________aaaaaa________a___", "__a____aaa___a_a______________a", "_____a______________a_________a", "____a______a__a_________a___a__", "_____aaa_____a_aaa_______aaa___", "a_a__a_____a____aa___a________a", "__aa____a__a_________a___a_a___", "__a__aa_____________a____a_a_a_", "__aa_a__a_a_a_________aa_______", "a_a__a_________a______________a", "a__a_________aaa_______a_a__a_a", "_____________a___a____a______a_", "__________a_a___aa_aaa_____a_a_", "__a_____a______________________", "_______a______aaa_a_______a____", "____a____a_________a___aaa_a_a_", "_a_____________a____________a__", "____a__a_____________a_a____a__", "____a_____a___a___aa_a_________", "__a___a___a__________________a_", "________a____a_____a___________", "_____aa_______a___a_a__a__a____", "___a____________a__a_a_________", "______________________a________", "____a______a_____a_a____a______", "_____a__a_________a_________aa_", "_______________a_____a____aa___", "___a_a_a___a__a___________a____", "_a____aaa______aa___a_a_a_a____", "_____a___a____aaaa____aa_______", "__a______a__a_____aa_a___a_____", "___a_aa__a____a__aa_____a______", "__a______a___a___aa_____a___a__", "______a_____a________a_________", "__a_a____a______________aa____a", "__a___a______aa____________a___", "_aa_a_______a_______a______a__a", "___aa_aa___a_____a_______a__a__", "______aa__a____a_______a_______", "_____a__a__a_a_____a_____a___aa", "aa_a___a_a_a_____a___a_a_a_aa_a", "___________________aaa___a__a__", "_a_____aa_a______a________a____", "_aa___aa_a__________a___a____a_", "______a______________a_a______a", "___a_______a__a___________a____", "_aaa___a____________aa__a___aa_", "aa__a_a_________a____________a_", "a___a_a______a_aa___________a_a", "_a_a___a________a______aa______", "____a___a___a_____a___a____a___", "___aa___________aa_________a___", "_________a___a__aaa____________", "__a________a_______________a___", "_____________a____a_a__________", "________a______a_a_______a____a", "_________________a____aa_a_aa__", "__a___aa________a______________", "a__a________a___a____a_________", "______a_a_____a_____a__aaa_a__a", "____a____________a___a_a_a_____", "____________a__________a___a___", "__________a____aa_a_________a__", "______________a___a___a__a_____", "a______a____a__aa____a______aa_", "___a____a_________________a____", "_a_aa_____________a___a____aa__", "____a__a_________a__a____a____a", "__a_____aa__a______a_a__a______", "__a__a_____a________a___a__a__a", "_________aa_a_aa_a_______a____a", "__a_______aa_aa___a_____a_____a", "_____________aa___a___________a", "__a______a__a____a___a__a_aa___", "____a________a______a_________a", "_______a________a__a_a_a__aa__a", "__a______a___________aa___a____", "_____a__a_a___a______________aa", "_a__a______a______a________a__a", "___aa_______________a____a_____", "_______a___a_______aa__a_______", "_____a____a___a___a__a_____a_a_", "___a_________a_____a___________", "___a_____aaa____a____a___a___a_", "a__a_____a_________a_________a_", "_________________a_a_____a____a", "___________a__________a__a_____", "________a_a____a___a__a_____aaa", "a____________________________a_", "__aa__a__a___aa_________a______", "______aa____a_a___a_________a__", "______a__aa_a______a__a_____a__", "___a_______aa____a_a____a______", "_____a________a___a____________", "a_______a___a_________a______a_", "______a______a____a__a_________", "__a_a________a__a______a____a__", "_a__a_a__________aa____aaa_a__a", "___a____a_aa__a___a____a_______", "__a_____a______a_aaa_______a___", "______________________________a", "_____a__a___a___________a______", "_aa___a____aa____a_a_a_a____a_a", "_a___a____a___a________a_______", "____a____________a___aa__a_____", "____aa__a____a____a_____a____aa", "_____________a__aa_a_a_a_______", "a_______a_a_a_______a__a__a____", "a__a___________a_______aaa__a__", "_a__aa_a_____a________a________", "__a_a_______a____________a__a__", "___________a__a____________aa_a", "_____a_______a_____a__a_aa_a__a", "______a______aa_____aa_________", "__aa_a__a_a__a__a______________", "_____a_____________aa___a_a_aa_", "_a______aa_a__________a________", "__a__a_________a_____a_a_a_____", "__a_____a_______a_____a__a_____", "a_a_a________a_a___a____a__a___", "_a_a_______a____________a____a_", "______a__________________a____a", "_a___a___a_____a_a__________a__", "_a__aa____aaaa___________a_a___", "__aa_____a___a_a____a____a_____", "a_____________________a____a_a_", "aaa__aaa_a_a___________a_____aa", "______a______a__________a______", "___a______a_aa_____a______aaa_a", "_____________a__a_a___________a", "__a_____________a_a__a_____a___", "___a_______________a____aa___aa", "________a_________________a____", "a__aaa_____a_______aa_a______aa", "____a_a______________a_________", "a__________a_____a__aa___a_____", "________________a___a__a____a__", "__a___a____aa__________a_a_____", "______a________aa______a__a___a", "___a____a__a_____a_______a___a_", "_a_____a__a___a__aaa____a______", "____a_________a____a_a_a_____a_", "a_a____a___a____a_____a__aa____", "_______a__a__a__________a___a__", "__a_a__a_____aa_a_a____________", "__a____a_____a__aa__a__a_a__a__", "__a_aa_a___________a___a__a____", "_________a________a___a________", "__a_a_a_______aa_________a_aa__", "a_a__________a_a___a__a______aa", "_a__a____________________a_a___", "_aa______a________________a___a", "__aa_aaaaaaa______a____a_______", "____a___aa_a____a_a____________", "_aa____a___aa_______a___a__a___", "___________a___a___a___a__a____", "a___a_____a_______a____a_____a_", "_____________a_________________", "________a_a_______a___a_a_a____", "______________a____________a_a_", "______a______aa__a_______a____a", "aa___a__________________a______", "_____a______aaa_____a_______a_a", "_____a_a____________a_a________", "__a_a__a____________a____a_a___", "aa_a_aaa_a_a_a__a______a_______", "___aa________a__a_____a_a_a__a_", "aa______a_aa_____aaaa__a_______", "____________a___a__a___a__a____", "___a__a________________aa_a__a_", "_a____a_a___________aa_a_a___a_", "aaaa__a___________a_______aaa__", "_______a_________________a_____", "_______a____a_______aa____a____", "__a_________a___a____a_________", "__________a__a___a_a___aa__a___", "____aa__________a_________aa___", "a_________aa__a_a__a_______a___", "_a___________a____a___a___a_a__", "____a__a_____a___aa____a_a____a", "_a____a_____a______a__aa_aa_a_a", "a______a__a_______aa___________", "___a__a___a_a_________________a", "______a_______aa____aa_a______a", "____a____a_a_a_____a____a____a_", "__a__________a_aa___aa__a______", "___a__a________a____a_a__a____a", "aa_______a________a__________a_", "_a________a_______a___a__aa___a", "__a__a__aa__a___________a___aaa", "__a______a__________a__aa______", "_a_____a__a_a___a___a_________a", "a_a______aa____________________", "a___a_____aa___________a_______", "________a___a____a_______aa____", "___a_aa___a____a____a__a__a__a_", "___a__a______aa____a__a__aa____", "a___a__________a_a_____________", "aa__a________aa_____a_________a", "_____a______a_a___aaa__a_______", "a__aa_a__a_aaa___________aa__a_", "_____a____a__________a_______a_", "aa_________aa_a________________", "____a_________a____________aa__", "_______a________a______a__a__aa", "_a___a___aa__a____a__a_________", "_____________a___a_a________a__", "______a__a___a__a_aaa__a_______", "________aa_a__a_a__a__a________", "a_aa__a__a__________a___aa__aaa", "_aa___a____________a_a___aa__a_", "________________a____aa_a___a__", "a_________________a__________a_", "___a__a__a_____________________", "__a___aa_a_a___________________", "_____a___a_______a____________a", "__a__a_________a__aa_a__a_a___a", "_____a_a_____a_a_______a_____a_", "__________________a__a____a_a__", "__a_____aaa_aa_______aa____a_a_", "__a______aa_______a____aa_a____", "____a___________________a__aa_a", "_______a____a_aa_a_______a____a", "__a___a______a__a___aaa____a_a_", "__a__a_a____a___________a_____a", "_____a__a__a_______a________a__", "______a_aa_a______a___________a", "a___a____a_a__aa_aa__a__aa_____", "a___aa____a_a___aa________a____", "__aa____________a_a_a__________", "____a_____a_a__a_______a__a____", "a__a_a_____a__a__aa___a__aa____", "___aa________a___________a___a_", "_aaaa______a__aa_________a_a___", "_______a_______________________", "_________________a____a__a_____", "_________aa______aaa___________", "_aa______a_a_a____a_a___a__aaa_", "____a______aa_aaa_a_a__a_______", "__________a_______aa______aa__a", "___________a_______a__aa_______", "_____aaa__a______________aa____", "________aa__a_a_a______a____a__", "a____a_________________________", "___________a_______________aa__", "______a_________________a______", "_____a___a__aa___aa___a___a____", "__________a_a___aa_aaaa______a_", "__a_a_____aa____a___________a__", "__________a____a__a____aa___a__", "_a_______a__aa___a___a_____a___", "___aa____a_a______aa___aa____a_", "a_______a_______a_aa_a___a_a___", "a___a__________________a______a", "__a_______a_______________a__aa", "a_____a__________________a____a", "_aa_____a_____a______aaaa_____a", "__a________a___a_a________a___a", "__aa_____a____a___a___________a", "__a__a_____aa__a_aa___a________", "__________aaa__a____aa_____a___", "___a___a____a_aa_a___a_a_______", "__aa______a_______a_______aa___", "____________a____________a_____", "_aa____a_________a_____________", "____a____a____a________aa___a_a", "_______aa______________________", "__________a_a_________________a", "______aa_a___a_________a_____a_", "__a___a______a__a_____________a", "__________aaa_a__a_a___a__a__a_", "a__a_a__a____aa___a___a_a___a__", "_a________aa___a______a_aa_____", "___aaa_a___aa______________aa__", "a_a_a___a___a__a____a_a__a_____", "_a_a_aa__a____a______a_a_______", "___a__a_a____aa___________a__a_", "_____aa__aa______a_a___________", "______a_____a____aaaa____a_____", "_a_a_a___a__a__a___________a___", "_____a______________________a__", "_________a_________a_aaa_aa____", "_____a______aa__________a______", "__a___________aa___________a___", "______________a_________a_____a", "__a____a__a___a___aa_a_________", "_a_a_a____a__________a_________"];
    let mut tree_count: i32 = 0;

    for pos_y in 0..323 {
        let pos_x: i32 = pos_y * 3;
        if slope_raw[pos_y as usize].chars().nth((pos_x % 31) as usize).unwrap() == 'a' {
            tree_count += 1;
        }
    }

    println!("{}", tree_count);

    // PART 2
    let mut tree_count_various_slopes: [i32; 5] = [0; 5];

    // first four slopes are easy to compute
    for slope_index in 0..4 {
        // calculate the REAL change in x (for every change in y)
        let real_delta_x: i32 = slope_index*2 + 1;
        
        // simply apply the code from part 1 using real_delta_x and incrementing tree_count_various_slopes
        for pos_y in 0..323 {
            let pos_x: i32 = pos_y * real_delta_x;
            if slope_raw[pos_y as usize].chars().nth((pos_x % 31) as usize).unwrap() == 'a' {
                tree_count_various_slopes[slope_index as usize] += 1;
            }
        }
    }

    // for the last slope, we make vertical jumps of distance 2
    for half_pos_y in 0..162 {
        let pos_y: i32 = half_pos_y * 2;
        let pos_x: i32 = half_pos_y;

        // increment tree_count_various_slopes as usual
        if slope_raw[pos_y as usize].chars().nth((pos_x % 31) as usize).unwrap() == 'a' {
            tree_count_various_slopes[4] += 1;
        }
    }

    let mut product: i32 = 1;
    for i in tree_count_various_slopes.iter() {
        product *= i;
    }

    println!("{:?}", product);
}
